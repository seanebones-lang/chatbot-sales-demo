<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>24/7 AI Chatbot - Stop Losing Customers While You Sleep</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            min-height: 100vh;
            color: #f5f5f5;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #1e1e1e;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            border: 1px solid #333;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            padding: 60px 40px;
            text-align: center;
            border-bottom: 2px solid #333;
        }

        .header h1 {
            font-size: 3.2em;
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: -1px;
            background: linear-gradient(135deg, #ffffff, #cccccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .tagline {
            font-size: 1.4em;
            color: #4A90E2;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.8;
            color: #cccccc;
            max-width: 600px;
            margin: 0 auto;
        }

        .main-section {
            padding: 50px 40px;
        }

        .business-input-section {
            background: #2a2a2a;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 40px;
            border: 1px solid #404040;
        }

        .business-input-section h2 {
            color: #ffffff;
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .input-group {
            margin-bottom: 30px;
        }

        .input-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: #f5f5f5;
            font-size: 1.2em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 18px;
            border: 1px solid #555;
            border-radius: 8px;
            font-size: 1.1em;
            background: #333;
            color: #f5f5f5;
            transition: all 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4A90E2;
            box-shadow: 0 0 0 3px rgba(74,144,226,0.2);
        }

        .analyze-btn {
            background: linear-gradient(135deg, #4A90E2, #357ABD);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 8px;
            font-size: 1.3em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .analyze-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(74,144,226,0.4);
        }

        .results-container {
            display: none;
        }

        .loss-calculator {
            background: linear-gradient(135deg, #1a2332, #1a1a1a);
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 40px;
            border: 2px solid #4A90E2;
        }

        .loss-calculator h3 {
            color: #4A90E2;
            font-size: 2em;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .loss-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .loss-stat {
            background: #333;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #4A90E2;
        }

        .loss-stat h4 {
            color: #f5f5f5;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .loss-stat .number {
            font-size: 2.2em;
            color: #4A90E2;
            font-weight: 700;
        }

        .demo-section {
            background: #1a1a1a;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 40px;
            border: 1px solid #444;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .demo-header h3 {
            color: #4CAF50;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .chat-demo {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 30px;
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #555;
        }

        .chat-message {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 12px;
            animation: slideIn 0.5s ease;
        }

        .chat-message.customer {
            background: #444;
            margin-left: 60px;
            color: #f5f5f5;
        }

        .chat-message.bot {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            margin-right: 60px;
            color: white;
        }

        .chat-message .label {
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .pricing-section {
            background: #2a2a2a;
            padding: 50px 40px;
            border-radius: 12px;
            margin-bottom: 40px;
            border: 1px solid #404040;
        }

        .billing-toggle {
            display: inline-flex;
            background: #333;
            border: 1px solid #555;
            border-radius: 8px;
            overflow: hidden;
            margin: 0 auto 25px auto;
        }

        .billing-toggle button {
            padding: 10px 16px;
            border: none;
            background: transparent;
            color: #ccc;
            cursor: pointer;
            font-weight: 600;
        }

        .billing-toggle button.active {
            background: #4A90E2;
            color: #fff;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .pricing-card {
            background: #333;
            padding: 35px 25px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            border-color: #4A90E2;
            box-shadow: 0 10px 30px rgba(74,144,226,0.2);
        }

        .pricing-card.featured {
            border-color: #5C6BC0;
            transform: scale(1.05);
        }

        .pricing-card.featured::before {
            content: "MOST POPULAR";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #5C6BC0;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .pricing-card h4 {
            font-size: 1.4em;
            color: #ffffff;
            margin-bottom: 15px;
        }

        .pricing-card .price {
            font-size: 2.5em;
            color: #5C6BC0;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .pricing-card .setup {
            color: #4A90E2;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .pricing-card ul {
            list-style: none;
            margin-bottom: 30px;
            text-align: left;
        }

        .pricing-card li {
            padding: 8px 0;
            color: #cccccc;
            border-bottom: 1px solid #444;
        }

        .pricing-card li:before {
            content: "✓ ";
            color: #5C6BC0;
            font-weight: bold;
        }

        .cta-section {
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            padding: 60px 40px;
            text-align: center;
            border-top: 2px solid #333;
        }

        .cta-btn {
            background: linear-gradient(135deg, #5C6BC0, #4A90E2);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 8px;
            font-size: 1.4em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            letter-spacing: 0.5px;
        }

        .cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(92,107,192,0.4);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.2em; }
            .main-section { padding: 30px 20px; }
            .pricing-card.featured { transform: none; }
        }
        /* Modal adjustments */
        input[name^="x_"] {
            /* discourage browser autofill heuristics */
            background: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Stop Losing Customers While You Sleep</h1>
            <div class="tagline">24/7 AI Chatbot That Never Calls In Sick</div>
            <p>Every missed call, delayed response, and after-hours inquiry is money walking out your door. See exactly how much you're losing and how our AI chatbot can recover it.</p>
        </div>

        <div class="main-section">
            <div class="business-input-section">
                <h2>What Type of Business Do You Own?</h2>
                
                <div class="input-group">
                    <label for="businessType">Select Your Industry</label>
                    <select id="businessType" autocomplete="off">
                        <option value="">Choose your business type...</option>
                        <option value="tattoo">Tattoo Shop / Artist</option>
                        <option value="hair_salon">Hair Salon / Stylist</option>
                        <option value="nail_salon">Nail Salon</option>
                        <option value="dental">Dental Practice</option>
                        <option value="massage">Massage Therapy</option>
                        <option value="auto_repair">Auto Repair Shop</option>
                        <option value="pet_grooming">Pet Grooming</option>
                        <option value="restaurant">Restaurant</option>
                        <option value="fitness">Fitness Training</option>
                        <option value="contractor">Contractor / Handyman</option>
                        <option value="real_estate">Real Estate Agent</option>
                        <option value="medical">Medical Practice</option>
                        <option value="legal">Legal Services</option>
                        <option value="other">Other Service Business</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="businessName">Your Business Name</label>
                    <input type="text" id="businessName" placeholder="Enter your business name" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" name="x_business_name">
                </div>

                <div class="input-group">
                    <label for="avgService">Average Service/Sale Value ($)</label>
                    <input type="number" id="avgService" placeholder="150" autocomplete="off" inputmode="numeric" name="x_avg">
                </div>

                <div class="input-group">
                    <label for="dailyCalls">Missed Calls/Inquiries Per Day</label>
                    <input type="number" id="dailyCalls" placeholder="5" autocomplete="off" inputmode="numeric" name="x_daily">
                </div>

                <button class="analyze-btn" onclick="analyzeRevenueLoss()">
                    📊 Show Me How Much I'm Losing
                </button>
            </div>

            <div class="results-container" id="resultsContainer">
                <div class="loss-calculator" id="lossCalculator">
                    <!-- Loss calculations will be populated here -->
                </div>

                <div class="demo-section">
                    <div class="demo-header">
                        <h3>🤖 Watch Your AI Chatbot In Action</h3>
                        <p style="color: #cccccc;">This is exactly how your chatbot will interact with your customers 24/7:</p>
                    </div>
                    <div class="chat-demo" id="chatDemo">
                        <!-- Chat simulation will appear here -->
                    </div>
                </div>

                <div class="pricing-section">
                    <h3 style="text-align: center; color: #ffffff; margin-bottom: 40px; font-size: 2em;">Choose Your Chatbot Package</h3>
                    <div style="text-align:center; margin-bottom: 10px;">
                        <div class="billing-toggle" role="tablist" aria-label="Billing Toggle">
                            <button id="billingMonthly" class="active" aria-selected="true" onclick="setBilling('monthly')">Monthly</button>
                            <button id="billingAnnual" aria-selected="false" onclick="setBilling('annual')">Annual <span style="opacity:0.9;">(Save setup + 10%)</span></button>
                        </div>
                        <div style="color:#aaa; font-size: 0.95em;">Year 1 cost shown below each plan</div>
                    </div>
                    <div class="pricing-grid">
                        <div class="pricing-card">
                            <h4>Basic Package</h4>
                            <div class="price" data-plan-price="basic">$99<span style="font-size: 0.4em;">/month</span></div>
                            <div class="setup" data-plan-setup="basic">$200 setup fee</div>
                            <div style="color:#9ec3ff; margin: 8px 0 14px 0; font-weight:600;" data-plan-year1="basic">Year 1: $1,388</div>
                            <ul>
                                <li>Basic FAQ responses</li>
                                <li>Simple callback scheduling</li>
                                <li>3 PDF downloads</li>
                                <li>Email notifications</li>
                                <li><strong>Support:</strong> Email (48hr response)</li>
                                <li>30-day service</li>
                                <li>1 complete rework included</li>
                                <li>Email support only</li>
                            </ul>
                            <button class="cta-btn" style="width:100%;" onclick="choosePlan('basic')">Choose Basic</button>
                        </div>

                        <div class="pricing-card featured" data-most-popular="gold" style="border-color: transparent; transform:none;">
                            <h4>Gold Package</h4>
                            <div class="price" data-plan-price="gold">$199<span style="font-size: 0.4em;">/month</span></div>
                            <div class="setup" data-plan-setup="gold">$400 setup fee</div>
                            <div style="color:#9ec3ff; margin: 8px 0 14px 0; font-weight:600;" data-plan-year1="gold">Year 1: $2,788</div>
                            <ul>
                                <li><strong>💳 DEPOSIT COLLECTION</strong></li>
                                <li>Smart scheduling system</li>
                                <li>Unlimited PDFs</li>
                                <li>Advanced follow-up automation</li>
                                <li>Customer database</li>
                                <li>Basic analytics dashboard</li>
                                <li>3 complete reworks</li>
                                <li><strong>Support:</strong> Phone & Email (4hr response)</li>
                            </ul>
                            <button class="cta-btn" style="width:100%;" onclick="choosePlan('gold')">Choose Gold</button>
                        </div>

                        <div class="pricing-card">
                            <h4>Standard Package</h4>
                            <div class="price" data-plan-price="standard">$149<span style="font-size: 0.4em;">/month</span></div>
                            <div class="setup" data-plan-setup="standard">$300 setup fee</div>
                            <div style="color:#9ec3ff; margin: 8px 0 14px 0; font-weight:600;" data-plan-year1="standard">Year 1: $2,088</div>
                            <ul>
                                <li>Advanced FAQ system</li>
                                <li>Calendar appointment scheduling</li>
                                <li>Customer info collection</li>
                                <li>6 PDF downloads</li>
                                <li>Basic follow-up sequences</li>
                                <li>2 complete reworks</li>
                                <li><strong>Support:</strong> Priority (1hr response)</li>
                            </ul>
                            <button class="cta-btn" style="width:100%;" onclick="choosePlan('standard')">Choose Standard</button>
                        </div>

                        <div class="pricing-card">
                            <h4>Platinum Package</h4>
                            <div class="price" data-plan-price="platinum">$299<span style="font-size: 0.4em;">/month</span></div>
                            <div class="setup" data-plan-setup="platinum">$500 setup fee</div>
                            <div style="color:#9ec3ff; margin: 8px 0 14px 0; font-weight:600;" data-plan-year1="platinum">Year 1: $4,088</div>
                            <ul>
                                <li><strong>🏢 MULTI-LOCATION SUPPORT</strong></li>
                                <li><strong>📊 FULL CRM INTEGRATION</strong></li>
                                <li><strong>📈 ADVANCED ANALYTICS</strong></li>
                                <li>Payment processing integration</li>
                                <li>Custom branding & white-label</li>
                                <li>API access for integrations</li>
                                <li>Unlimited reworks</li>
                                <li>Dedicated account manager</li>
                                <li><strong>Support:</strong> Priority (1hr response)</li>
                            </ul>
                            <button class="cta-btn" style="width:100%;" onclick="choosePlan('platinum')">Choose Platinum</button>
                        </div>

                        <div class="pricing-card">
                            <h4>Agency</h4>
                            <div class="price" data-plan-price="agency">$399<span style="font-size: 0.4em;">/month</span></div>
                            <div class="setup" data-plan-setup="agency">$700 setup fee</div>
                            <div style="color:#9ec3ff; margin: 8px 0 14px 0; font-weight:600;" data-plan-year1="agency">Year 1: $5,488</div>
                            <ul>
                                <li><strong>🏪 FRANCHISE/CHAIN SUPPORT</strong></li>
                                <li><strong>🤖 ADVANCED AI TRAINING</strong></li>
                                <li><strong>📊 REAL-TIME DASHBOARDS</strong></li>
                                <li><strong>💼 FULL WHITE-LABEL RIGHTS</strong></li>
                                <li>Custom integrations & APIs</li>
                                <li><strong>Support:</strong> 24/7 Dedicated Priority</li>
                                <li>Monthly strategy calls</li>
                                <li>Revenue performance guarantees</li>
                            </ul>
                            <button class="cta-btn" style="width:100%;" onclick="choosePlan('agency')">Choose Agency</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="cta-section">
            <h2 style="color: #ffffff; margin-bottom: 20px; font-size: 2.2em;">Ready to Stop Losing Money?</h2>
            <p style="color: #cccccc; font-size: 1.3em; margin-bottom: 30px;">Join hundreds of businesses already using our AI chatbots to capture every opportunity.</p>
            <button class="cta-btn" onclick="openDemoModal()">
                🚀 Get My Free Demo & Setup Call
            </button>
            <p style="color: #888; margin-top: 20px;">No commitment required • See it working in 15 minutes</p>
        </div>
    </div>

    <script>
        const businessData = {
            tattoo: {
                avgValue: 200,
                conversionRate: 85,
                industryFacts: "73% of tattoo inquiries happen after hours",
                depositAmount: 50,
                chatExamples: [
                    { type: 'customer', text: 'Hi, do you do cover-up tattoos? What would a sleeve cost?' },
                    { type: 'bot', text: 'Absolutely! We specialize in cover-ups and custom sleeves. A full sleeve typically ranges from $1,500-$3,500 depending on detail and size. I can schedule you a free consultation with our artist to discuss your specific design. Would you prefer this week or next?' },
                    { type: 'customer', text: 'This week would be great, what do you have available?' },
                    { type: 'bot', text: '✅ Perfect! I have Thursday 2pm or Friday 11am for consultations.<br><br>📋 <strong>Let me collect your information:</strong><br>• Name: [Captured]<br>• Phone: [Captured]<br>• Email: [Captured]<br><br>💳 <strong>$50 consultation deposit</strong> secures your spot and is applied to your tattoo.<br><br>📄 <strong>Sending you:</strong><br>• Portfolio PDF<br>• Aftercare Guide<br>• Pricing Menu<br><br>Which time works - Thursday 2pm or Friday 11am?' },
                    { type: 'customer', text: 'Thursday 2pm, and here\'s my card info...' },
                    { type: 'bot', text: '🎉 <strong>APPOINTMENT CONFIRMED!</strong><br><br>📅 <strong>Thursday, Oct 26 at 2:00pm</strong><br>👤 <strong>Artist:</strong> Mike Rodriguez<br>💳 <strong>$50 deposit received</strong><br>📍 <strong>Location:</strong> Downtown Studio<br><br>📧 <strong>Confirmation sent to email</strong><br>📱 <strong>SMS reminder set for 24hrs before</strong><br><br>🔄 <strong>Follow-up sequence activated:</strong><br>• Day before: Appointment reminder<br>• Day of: Preparation checklist<br>• 1 week after: Aftercare check-in<br>• 1 month after: Touch-up availability' }
                ]
            },
            hair_salon: {
                avgValue: 120,
                conversionRate: 78,
                industryFacts: "68% of salon bookings happen outside business hours",
                depositAmount: 25,
                chatExamples: [
                    { type: 'customer', text: 'Hi! I need a color correction and cut, how much would that cost?' },
                    { type: 'bot', text: 'Hi there! Color corrections typically range from $180-$280 depending on your current color and desired result. With a cut, you\'re looking at $220-$320 total. I can schedule you a consultation where we\'ll assess your hair and give you an exact quote. Are you available this week?' },
                    { type: 'customer', text: 'Yes, what about tomorrow afternoon?' },
                    { type: 'bot', text: '✅ <strong>Available: Tomorrow 2:30pm with Sarah</strong><br><br>📋 <strong>Customer Profile Created:</strong><br>• Service: Color correction + cut<br>• Hair history: [Captured via questions]<br>• Allergies: [Checked]<br>• Preferred stylist: Sarah<br><br>💳 <strong>$25 booking deposit</strong><br>Applied to final service cost<br><br>📱 <strong>CRM Integration:</strong><br>• Added to client database<br>• Service history tracked<br>• Automatic rebooking reminders<br><br>📄 <strong>Sending:</strong> Portfolio, pricing menu, prep instructions' }
                ]
            },
            dental: {
                avgValue: 300,
                conversionRate: 65,
                industryFacts: "81% of dental emergencies occur outside office hours",
                depositAmount: 75,
                chatExamples: [
                    { type: 'customer', text: 'I have a terrible toothache, do you have any emergency appointments?' },
                    { type: 'bot', text: 'I\'m so sorry you\'re in pain! We can see you for an emergency appointment. Dr. Smith has an opening at 3pm today or 9am tomorrow. For immediate relief, rinse with warm salt water and take ibuprofen as directed. Which appointment time works for you?' },
                    { type: 'customer', text: 'Today at 3pm please!' },
                    { type: 'bot', text: '🚨 <strong>EMERGENCY APPOINTMENT BOOKED</strong><br><br>📅 <strong>Today 3:00pm with Dr. Smith</strong><br>💳 <strong>$75 emergency deposit</strong> (applied to treatment)<br><br>📋 <strong>Pre-appointment completed:</strong><br>• Insurance verification: [Checked]<br>• Medical history: [Updated]<br>• Pain level assessment: [Recorded]<br><br>📱 <strong>Multi-channel notifications:</strong><br>• SMS confirmation sent<br>• Email with forms attached<br>• Calendar reminder set<br><br>🏥 <strong>Clinic preparation:</strong><br>• Chart prepared<br>• Emergency kit ready<br>• Dr. Smith notified' }
                ]
            },
            auto_repair: {
                avgValue: 400,
                conversionRate: 72,
                industryFacts: "89% of auto repair inquiries need immediate attention",
                depositAmount: 100,
                chatExamples: [
                    { type: 'customer', text: 'My check engine light just came on, can you diagnose it today?' },
                    { type: 'bot', text: 'Absolutely! A diagnostic typically takes 1 hour and costs $120 (applied toward repairs if you proceed). I can get you in today at 4pm or tomorrow at 10am. Most check engine lights are minor issues, but it\'s smart to address quickly. Which time works better?' },
                    { type: 'customer', text: 'Today at 4pm sounds good' },
                    { type: 'bot', text: '🔧 <strong>DIAGNOSTIC APPOINTMENT CONFIRMED</strong><br><br>📅 <strong>Today 4:00pm - Bay 3</strong><br>💳 <strong>$100 service deposit</strong> (covers diagnostic + applied to repairs)<br><br>🚗 <strong>Vehicle Information Captured:</strong><br>• Make/Model/Year: [Recorded]<br>• VIN: [Stored for parts lookup]<br>• Mileage: [Logged]<br>• Symptoms: [Detailed notes]<br><br>📊 <strong>Shop Management Integration:</strong><br>• Work order created: #WO-2847<br>• Technician assigned: Mike<br>• Parts availability pre-checked<br><br>📄 <strong>Customer packet sent:</strong><br>• Service process guide<br>• Warranty information<br>• Current promotions' }
                ]
            },
            nail_salon: {
                avgValue: 70,
                conversionRate: 75,
                industryFacts: "Most nail bookings are made the evening before the appointment",
                depositAmount: 15,
                chatExamples: [
                    { type: 'customer', text: 'Hi! Do you have availability for a gel manicure and pedicure?' },
                    { type: 'bot', text: 'We do! A gel mani-pedi combo is $85 and takes about 90 minutes. I can book you tomorrow at 11am or 3pm. Which time works better?' },
                    { type: 'customer', text: '3pm works.' },
                    { type: 'bot', text: '💅 <strong>APPOINTMENT CONFIRMED</strong><br><br>📅 Tomorrow 3:00pm with Kim<br>💳 $15 deposit secured (applied to service)<br>📧 Confirmation email sent with prep tips<br>📱 SMS reminder will be sent 24hrs before' }
                ]
            },
            massage: {
                avgValue: 95,
                conversionRate: 70,
                industryFacts: "Evening and weekend massage slots fill fastest via online booking",
                depositAmount: 20,
                chatExamples: [
                    { type: 'customer', text: 'Do you offer 60-minute deep tissue massages?' },
                    { type: 'bot', text: 'Yes! A 60-minute deep tissue session is $95. I can book you today at 6pm or tomorrow at 10am. Would you like me to reserve a slot?' },
                    { type: 'customer', text: 'Today at 6pm.' },
                    { type: 'bot', text: '🧖 <strong>BOOKED</strong><br><br>📅 Today 6:00pm with Alex<br>💳 $20 deposit collected<br>📧 Confirmation + intake form emailed<br>📱 SMS reminder scheduled' }
                ]
            },
            pet_grooming: {
                avgValue: 80,
                conversionRate: 74,
                industryFacts: "First-time grooming customers often book after hours via chat",
                depositAmount: 20,
                chatExamples: [
                    { type: 'customer', text: 'Can I book grooming for a small dog? Do you have availability this week?' },
                    { type: 'bot', text: 'Absolutely! Small dog full groom is $80. I can book Wednesday 1pm or Friday 10am. Does either work?' },
                    { type: 'customer', text: 'Friday 10am.' },
                    { type: 'bot', text: '🐶 <strong>GROOMING CONFIRMED</strong><br><br>📅 Friday 10:00am with Maya<br>💳 $20 deposit collected<br>📧 Confirmation sent with pre-visit tips' }
                ]
            },
            restaurant: {
                avgValue: 40,
                conversionRate: 60,
                industryFacts: "Most reservations are made on mobile between 5-8pm",
                depositAmount: 0,
                chatExamples: [
                    { type: 'customer', text: 'Hi, do you have a table for 4 tomorrow evening?' },
                    { type: 'bot', text: 'We do! I can reserve for 6:30pm or 7:15pm tomorrow. Any dietary preferences I should note?' },
                    { type: 'customer', text: '7:15pm, one vegetarian.' },
                    { type: 'bot', text: '🍽️ <strong>RESERVATION CONFIRMED</strong><br><br>📅 Tomorrow 7:15pm, party of 4<br>📝 Noted: 1 vegetarian<br>📧 Confirmation email sent' }
                ]
            },
            fitness: {
                avgValue: 75,
                conversionRate: 68,
                industryFacts: "Trial sessions convert 2x better when booked instantly",
                depositAmount: 25,
                chatExamples: [
                    { type: 'customer', text: 'Do you offer personal training intro sessions?' },
                    { type: 'bot', text: 'Yes! A 45-minute intro assessment is $75. I can book Thursday 5pm or Saturday 10am. Which do you prefer?' },
                    { type: 'customer', text: 'Saturday 10am.' },
                    { type: 'bot', text: '🏋️ <strong>SESSION BOOKED</strong><br><br>📅 Saturday 10:00am with Jordan<br>💳 $25 deposit collected<br>📧 Assessment form emailed' }
                ]
            },
            contractor: {
                avgValue: 500,
                conversionRate: 55,
                industryFacts: "Fast quote turnarounds increase win rate by 30%",
                depositAmount: 50,
                chatExamples: [
                    { type: 'customer', text: 'Can I get a quote for drywall repair and painting?' },
                    { type: 'bot', text: 'Yes! I can schedule a free estimate visit. I have Wednesday 3pm or Thursday 11am available. Which works?' },
                    { type: 'customer', text: 'Thursday 11am.' },
                    { type: 'bot', text: '🛠️ <strong>ESTIMATE SCHEDULED</strong><br><br>📅 Thursday 11:00am onsite<br>💳 $50 booking fee (credited toward work)<br>📧 Confirmation sent with prep checklist' }
                ]
            },
            real_estate: {
                avgValue: 3000,
                conversionRate: 40,
                industryFacts: "Speed-to-lead under 5 minutes doubles showing conversions",
                depositAmount: 0,
                chatExamples: [
                    { type: 'customer', text: 'I want to schedule a showing for the 3-bed on Maple St.' },
                    { type: 'bot', text: 'Great choice! I can schedule a showing tomorrow 1pm or Saturday 11am. Do either work?' },
                    { type: 'customer', text: 'Saturday 11am.' },
                    { type: 'bot', text: '🏠 <strong>SHOWING CONFIRMED</strong><br><br>📅 Saturday 11:00am with Agent Kim<br>📧 Confirmation + property packet emailed<br>📱 SMS reminder scheduled' }
                ]
            },
            medical: {
                avgValue: 180,
                conversionRate: 62,
                industryFacts: "After-hours triage captures urgent appointments next day",
                depositAmount: 50,
                chatExamples: [
                    { type: 'customer', text: 'I need to see a doctor for a persistent cough.' },
                    { type: 'bot', text: 'I can book you for a same-week appointment. Next available is Tuesday 9am or Wednesday 2pm. Which works better?' },
                    { type: 'customer', text: 'Wednesday 2pm.' },
                    { type: 'bot', text: '🏥 <strong>APPOINTMENT BOOKED</strong><br><br>📅 Wednesday 2:00pm<br>💳 $50 deposit collected (applied to visit)<br>📧 Forms and instructions emailed' }
                ]
            },
            legal: {
                avgValue: 250,
                conversionRate: 50,
                industryFacts: "Instant consult booking reduces no-shows by 35%",
                depositAmount: 75,
                chatExamples: [
                    { type: 'customer', text: 'Do you offer free consultations for contract review?' },
                    { type: 'bot', text: 'We offer a 30-minute consult for $250, credited if you proceed. I can book Thursday 4pm or Friday 1pm. Which time works?' },
                    { type: 'customer', text: 'Friday 1pm.' },
                    { type: 'bot', text: '⚖️ <strong>CONSULT BOOKED</strong><br><br>📅 Friday 1:00pm with Attorney Lee<br>💳 $75 deposit collected<br>📧 Confirmation + document checklist emailed' }
                ]
            },
            other: {
                avgValue: 150,
                conversionRate: 60,
                industryFacts: "Automated lead capture prevents most missed opportunities",
                depositAmount: 25,
                chatExamples: [
                    { type: 'customer', text: 'Do you take bookings and how much is a typical service?' },
                    { type: 'bot', text: 'Yes! Most services range around $150. I can book a consultation this week to personalize your quote. Would Wednesday afternoon or Thursday morning work?' },
                    { type: 'customer', text: 'Thursday morning.' },
                    { type: 'bot', text: '✅ <strong>CONSULTATION SCHEDULED</strong><br><br>📅 Thursday 10:00am<br>💳 $25 deposit collected<br>📧 Confirmation email sent' }
                ]
            }
        };

        function analyzeRevenueLoss() {
            const businessType = document.getElementById('businessType').value;
            const businessName = document.getElementById('businessName').value;
            const avgService = parseInt(document.getElementById('avgService').value) || 150;
            const dailyCalls = parseInt(document.getElementById('dailyCalls').value) || 5;

            if (!businessType || !businessName) {
                alert('Please fill in all fields to see your revenue analysis.');
                return;
            }

            const data = businessData[businessType] || businessData.tattoo;
            const dailyLoss = dailyCalls * avgService * (data.conversionRate / 100);
            const monthlyLoss = dailyLoss * 30;
            const yearlyLoss = dailyLoss * 365;

            document.getElementById('lossCalculator').innerHTML = `
                <h3>💸 ${businessName} - Revenue Loss Analysis</h3>
                <div class="loss-stats">
                    <div class="loss-stat">
                        <h4>Daily Revenue Lost</h4>
                        <div class="number">$${Math.round(dailyLoss).toLocaleString()}</div>
                    </div>
                    <div class="loss-stat">
                        <h4>Monthly Revenue Lost</h4>
                        <div class="number">$${Math.round(monthlyLoss).toLocaleString()}</div>
                    </div>
                    <div class="loss-stat">
                        <h4>Annual Revenue Lost</h4>
                        <div class="number">$${Math.round(yearlyLoss).toLocaleString()}</div>
                    </div>
                </div>
                <div style="background: #333; padding: 20px; border-radius: 8px; text-align: center;">
                    <h4 style="color: #4A90E2; margin-bottom: 10px;">Industry Fact:</h4>
                    <p style="color: #cccccc; font-size: 1.1em;">${data.industryFacts}</p>
                    <p style="color: #5C6BC0; font-size: 1.2em; margin-top: 15px; font-weight: 600;">
                        Our AI chatbot captures ${data.conversionRate}% of these missed opportunities!
                    </p>
                </div>
            `;

            document.getElementById('resultsContainer').style.display = 'block';
            document.querySelector('.business-input-section').style.display = 'none';

            // Start chat simulation
            setTimeout(() => simulateChat(businessType), 1000);
        }

        // Show demo when a business is selected (without requiring the full form)
        (function attachBusinessSelectorHandler() {
            const selector = document.getElementById('businessType');
            if (!selector) return;
            selector.addEventListener('change', () => {
                const selected = selector.value;
                if (!selected) return;
                const results = document.getElementById('resultsContainer');
                if (results) {
                    results.style.display = 'block';
                }
                simulateChat(selected);
                setTimeout(() => {
                    results?.scrollIntoView({ behavior: 'smooth' });
                }, 200);
            });
        })();

        // Chat simulation scheduling control
        let __chatTimeouts = [];
        let __chatRunId = 0;

        function clearChatSchedule() {
            if (__chatTimeouts && __chatTimeouts.length) {
                __chatTimeouts.forEach(id => clearTimeout(id));
            }
            __chatTimeouts = [];
        }

        function simulateChat(businessType) {
            const data = businessData[businessType] || businessData.tattoo;
            const chatContainer = document.getElementById('chatDemo');
            const messages = data.chatExamples || [];

            // Cancel any pending message injections from a previous selection
            clearChatSchedule();
            // Bump run id to invalidate older timeouts
            const runId = ++__chatRunId;

            // Reset chat UI
            chatContainer.innerHTML = '';

            messages.forEach((message, index) => {
                const t = setTimeout(() => {
                    if (runId !== __chatRunId) return; // stale run, skip
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `chat-message ${message.type}`;
                    messageDiv.innerHTML = `
                        <div class="label">${message.type === 'customer' ? 'Potential Customer' : 'Your AI Chatbot'}</div>
                        ${message.text}
                    `;
                    chatContainer.appendChild(messageDiv);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, index * 2000);
                __chatTimeouts.push(t);
            });

            // Add final comprehensive summary with analytics dashboard
            const tail = setTimeout(() => {
                if (runId !== __chatRunId) return; // stale run, skip
                const analyticsDiv = document.createElement('div');
                analyticsDiv.className = 'chat-message bot';
                analyticsDiv.innerHTML = `
                    <div class="label">📊 PLATINUM ANALYTICS DASHBOARD</div>
                    <strong>🎯 Real-time Business Intelligence:</strong><br><br>
                    
                    📈 <strong>Today's Performance:</strong><br>
                    • 12 conversations handled<br>
                    • 9 appointments booked<br>
                    • $1,850 in deposits collected<br>
                    • 75% conversion rate<br><br>
                    
                    🔄 <strong>Follow-up Pipeline:</strong><br>
                    • 23 customers in nurture sequence<br>
                    • 8 ready for rebooking<br>
                    • 15 pending consultation responses<br><br>
                    
                    📱 <strong>Multi-Location Sync:</strong><br>
                    • Downtown: 4 bookings<br>
                    • Westside: 3 bookings<br>
                    • Mall location: 2 bookings<br><br>
                    
                    💼 <strong>CRM Integration Active:</strong><br>
                    • Customer profiles auto-updated<br>
                    • Service history tracked<br>
                    • Preference learning enabled<br><br>
                    
                    <strong>🚀 This level of automation runs 24/7 while you sleep!</strong>
                `;
                chatContainer.appendChild(analyticsDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, messages.length * 2000 + 2000);
            __chatTimeouts.push(tail);
        }

        function scheduleDemo() { /* deprecated, replaced by openDemoModal() */ }

        function openDemoModal() {
            const modal = document.getElementById('demoModal');
            if (modal) modal.style.display = 'block';
        }

        function closeDemoModal() {
            const modal = document.getElementById('demoModal');
            if (modal) modal.style.display = 'none';
        }

        async function submitDemoRequest(event) {
            event.preventDefault();

            const emailInput = document.getElementById('leadEmail');
            const nameInput = document.getElementById('leadName');

            const email = (emailInput?.value || '').trim();
            const name = (nameInput?.value || '').trim();

            if (!email) {
                alert('Please enter your email to schedule a free demo.');
                return;
            }

            const businessType = document.getElementById('businessType')?.value || '';
            const businessName = document.getElementById('businessName')?.value || '';
            const avgService = parseInt(document.getElementById('avgService')?.value) || undefined;
            const dailyCalls = parseInt(document.getElementById('dailyCalls')?.value) || undefined;

            const payload = {
                source: 'cta_free_demo',
                businessName: businessName,
                industry: businessType || 'unspecified',
                email: email,
                avgValue: avgService,
                missedDaily: dailyCalls,
                messageHistory: []
            };

            try {
                const res = await fetch('/api/lead', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                if (!data.ok) throw new Error(data.error || 'Failed to submit');

                closeDemoModal();
                alert('🎉 Demo request received! We\'ll email you shortly.');
            } catch (e) {
                console.error(e);
                alert('Sorry, something went wrong submitting your demo request. Please email seanebones.lang@gmail.com directly.');
            }
        }

        // Pricing and Billing Logic
        const pricingConfig = {
            basic:    { monthly: 99,  setup: 200 },
            standard: { monthly: 149, setup: 300 },
            gold:     { monthly: 199, setup: 400 },
            platinum: { monthly: 299, setup: 500 },
            agency:   { monthly: 399, setup: 700 },
        };
        let currentBilling = 'monthly'; // or 'annual'

        function computeYear1(planKey, billing) {
            const cfg = pricingConfig[planKey];
            if (!cfg) return { year1: 0, priceLabel: '', setupLabel: '' };
            if (billing === 'monthly') {
                const year1 = cfg.setup + cfg.monthly * 12;
                return {
                    year1,
                    priceLabel: `$${cfg.monthly}<span style="font-size: 0.4em;">/month</span>`,
                    setupLabel: `$${cfg.setup} setup fee`
                };
            }
            // annual: waive setup + 10% discount on annual subscription
            const annualBeforeDiscount = cfg.monthly * 12;
            const annualDiscount = Math.round(annualBeforeDiscount * 0.10);
            const annualTotal = annualBeforeDiscount - annualDiscount; // setup waived
            return {
                year1: annualTotal,
                priceLabel: `$${annualTotal}<span style="font-size: 0.4em;">/year</span> <span style="font-size:0.8em; color:#9ec3ff;">(~$${Math.round(annualTotal/12)}/mo)</span>`,
                setupLabel: `<span style="color:#7CFC00;">$0 setup (save $${cfg.setup})</span>`
            };
        }

        function updatePricingUI() {
            Object.keys(pricingConfig).forEach((plan) => {
                const priceEl = document.querySelector(`[data-plan-price="${plan}"]`);
                const setupEl = document.querySelector(`[data-plan-setup="${plan}"]`);
                const year1El = document.querySelector(`[data-plan-year1="${plan}"]`);
                if (!priceEl || !setupEl || !year1El) return;
                const { year1, priceLabel, setupLabel } = computeYear1(plan, currentBilling);
                priceEl.innerHTML = priceLabel;
                setupEl.innerHTML = setupLabel;
                year1El.textContent = `Year 1: $${year1.toLocaleString()}`;
            });

            const m = document.getElementById('billingMonthly');
            const a = document.getElementById('billingAnnual');
            if (m && a) {
                m.classList.toggle('active', currentBilling === 'monthly');
                a.classList.toggle('active', currentBilling === 'annual');
                m.setAttribute('aria-selected', String(currentBilling === 'monthly'));
                a.setAttribute('aria-selected', String(currentBilling === 'annual'));
            }
        }

        function setBilling(mode) {
            currentBilling = mode === 'annual' ? 'annual' : 'monthly';
            updatePricingUI();
        }

        function choosePlan(planKey) {
            window.__selectedPlan = planKey;
            window.__selectedBilling = currentBilling;
            openDemoModal();
            const summary = document.getElementById('demoPlanSummary');
            if (summary) {
                const planName = planKey.charAt(0).toUpperCase() + planKey.slice(1);
                const { year1 } = computeYear1(planKey, currentBilling);
                summary.textContent = `Selected: ${planName} • Billing: ${currentBilling.toUpperCase()} • Year 1: $${year1.toLocaleString()}`;
            }
        }

        // initialize pricing UI
        updatePricingUI();

        // Smooth scrolling for better UX
        document.querySelector('.analyze-btn').addEventListener('click', () => {
            setTimeout(() => {
                document.getElementById('resultsContainer').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            }, 500);
        });
    </script>

    <!-- Free Demo Modal -->
    <div id="demoModal" style="display:none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1000;">
        <div style="max-width: 520px; margin: 8% auto; background: #1f1f1f; border: 1px solid #444; border-radius: 12px; padding: 24px; color: #fff;">
            <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <h3 style="margin:0; color:#5C6BC0;">Book Your Free Demo</h3>
                <button onclick="closeDemoModal()" aria-label="Close" style="background: transparent; border: none; color: #ccc; font-size: 1.6em; cursor: pointer;">×</button>
            </div>
            <p style="color:#ccc; margin-bottom: 16px;">Enter your details and we\'ll email you to confirm your 15-minute setup call.</p>
            <div id="demoPlanSummary" style="background:#2a2a2a; border:1px solid #444; padding:10px 12px; border-radius:8px; color:#9ec3ff; margin-bottom:12px; display:block;"></div>
            <form onsubmit="submitDemoRequest(event)" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false">
                <div class="input-group">
                    <label for="leadName">Your Name</label>
                    <input id="leadName" name="x_name" type="text" placeholder="Jane Doe" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" style="background:#333;">
                </div>
                <div class="input-group">
                    <label for="leadEmail">Your Email</label>
                    <input id="leadEmail" name="x_email" type="email" placeholder="you@example.com" inputmode="email" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" style="background:#333;">
                </div>
                <button type="submit" class="cta-btn" style="width: 100%; margin-top: 10px;">Send Me the Free Demo</button>
                <div style="color:#888; font-size: 0.9em; margin-top: 10px; text-align: center;">No spam. Cancel anytime.</div>
            </form>
        </div>
    </div>
</body>
</html>
